<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROYAL TRUST BD - Admin Panel</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Hind Siliguri', sans-serif;
        }
        
        .sidebar {
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -250px;
                top: 0;
                bottom: 0;
                z-index: 50;
            }
            
            .sidebar.active {
                left: 0;
            }
            
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 40;
            }
            
            .overlay.active {
                display: block;
            }
        }
        
        .stat-card {
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .order-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-confirmed { background: #dbeafe; color: #1e40af; }
        .status-processing { background: #f3e8ff; color: #7c3aed; }
        .status-shipped { background: #f0f9ff; color: #0c4a6e; }
        .status-delivered { background: #d1fae5; color: #065f46; }
        .status-cancelled { background: #fee2e2; color: #991b1b; }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            margin-bottom: 4px;
        }
        
        .nav-item:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .nav-item.active {
            background: rgba(220, 38, 38, 0.2);
            color: #fff;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Login Page -->
    <div id="login-page" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-blue-50">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md mx-4">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-red-700 mb-2">ROYAL TRUST BD</h1>
                <p class="text-gray-600">এডমিন প্যানেল লগইন</p>
            </div>
            
            <form id="login-form" class="space-y-6">
                <div>
                    <label class="block text-gray-700 mb-2">ব্যবহারকারীর নাম</label>
                    <input type="text" id="username" required 
                           class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                           placeholder="ব্যবহারকারীর নাম লিখুন"
                           value="admin">
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">পাসওয়ার্ড</label>
                    <input type="password" id="password" required 
                           class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                           placeholder="পাসওয়ার্ড লিখুন"
                           value="admin123">
                </div>
                
                <div id="login-error" class="text-red-600 text-center hidden">
                    <i class="fas fa-exclamation-circle mr-2"></i>ভুল ব্যবহারকারীর নাম বা পাসওয়ার্ড!
                </div>
                
                <button type="submit" class="w-full bg-red-700 hover:bg-red-800 text-white font-bold py-4 rounded-lg transition duration-300">
                    <i class="fas fa-sign-in-alt mr-2"></i>লগইন করুন
                </button>
            </form>
            
            <div class="mt-6 text-center text-gray-600 text-sm">
                <p><i class="fas fa-server mr-2"></i>ব্যাকএন্ড API:</p>
                <p id="api-url" class="font-mono text-blue-600 mt-1">https://royal-trustbd.onrender.com</p>
                <p class="mt-2"><i class="fas fa-info-circle mr-2"></i>ডিফল্ট: admin / admin123</p>
            </div>
        </div>
    </div>
    
    <!-- Main Admin Panel (Hidden by default) -->
    <div id="admin-panel" class="hidden">
        <!-- Mobile Header -->
        <div class="md:hidden bg-white shadow p-4 flex justify-between items-center sticky top-0 z-30">
            <button id="mobile-menu-btn" class="text-gray-700 p-2">
                <i class="fas fa-bars text-xl"></i>
            </button>
            <h1 class="text-xl font-bold text-red-700">ROYAL TRUST BD</h1>
            <div class="w-8"></div>
        </div>
        
        <!-- Overlay for mobile -->
        <div id="overlay" class="overlay"></div>
        
        <!-- Sidebar -->
        <div class="sidebar md:w-64 bg-gray-900 text-white h-screen fixed md:relative z-40">
            <div class="p-6 border-b border-gray-800">
                <h2 class="text-2xl font-bold">ROYAL TRUST BD</h2>
                <p class="text-gray-400 text-sm mt-1">এডমিন প্যানেল</p>
            </div>
            
            <nav class="p-4">
                <ul class="space-y-2">
                    <li>
                        <a href="#dashboard" class="nav-item active">
                            <i class="fas fa-tachometer-alt mr-3"></i>
                            ড্যাশবোর্ড
                        </a>
                    </li>
                    <li>
                        <a href="#products" class="nav-item">
                            <i class="fas fa-tshirt mr-3"></i>
                            পণ্য ব্যবস্থাপনা
                        </a>
                    </li>
                    <li>
                        <a href="#orders" class="nav-item">
                            <i class="fas fa-shopping-cart mr-3"></i>
                            অর্ডার ব্যবস্থাপনা
                        </a>
                    </li>
                    <li>
                        <a href="#reviews" class="nav-item">
                            <i class="fas fa-star mr-3"></i>
                            রিভিউ ব্যবস্থাপনা
                        </a>
                    </li>
                    <li>
                        <a href="#sliders" class="nav-item">
                            <i class="fas fa-images mr-3"></i>
                            স্লাইডার ব্যবস্থাপনা
                        </a>
                    </li>
                    <li>
                        <a href="#settings" class="nav-item">
                            <i class="fas fa-cog mr-3"></i>
                            ওয়েবসাইট সেটিংস
                        </a>
                    </li>
                    <li>
                        <button id="logout-btn" class="nav-item w-full text-left">
                            <i class="fas fa-sign-out-alt mr-3"></i>
                            লগআউট
                        </button>
                    </li>
                </ul>
            </nav>
            
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-800 bg-gray-900">
                <div class="text-center text-gray-400 text-sm">
                    <p><i class="fas fa-user mr-1"></i>লগইন করেছেন:</p>
                    <p id="logged-in-user" class="font-bold text-white mt-1">-</p>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="md:ml-64">
            <!-- Header -->
            <header class="bg-white shadow p-4 hidden md:block sticky top-0 z-20">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold text-gray-800" id="page-title">ড্যাশবোর্ড</h1>
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <span class="text-gray-600 text-sm block" id="current-date"></span>
                            <span class="text-gray-800 font-medium" id="current-time"></span>
                        </div>
                        <div class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white font-bold">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Content Area -->
            <main class="p-4 md:p-6 min-h-screen">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500">মোট অর্ডার</p>
                                    <p class="text-3xl font-bold mt-2" id="total-orders">0</p>
                                </div>
                                <div class="text-red-600 bg-red-50 p-3 rounded-lg">
                                    <i class="fas fa-shopping-cart text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <p class="text-yellow-600 text-sm">
                                    <i class="fas fa-clock mr-1"></i>
                                    <span id="pending-orders">0</span> পেন্ডিং
                                </p>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500">মোট আয়</p>
                                    <p class="text-3xl font-bold mt-2" id="total-revenue">0</p>
                                    <p class="text-gray-500 text-sm">টাকা</p>
                                </div>
                                <div class="text-green-600 bg-green-50 p-3 rounded-lg">
                                    <i class="fas fa-money-bill-wave text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <p class="text-green-600 text-sm">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    <span id="delivered-orders">0</span> ডেলিভার্ড
                                </p>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500">মোট পণ্য</p>
                                    <p class="text-3xl font-bold mt-2" id="total-products">0</p>
                                </div>
                                <div class="text-blue-600 bg-blue-50 p-3 rounded-lg">
                                    <i class="fas fa-tshirt text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <p class="text-blue-600 text-sm">
                                    <i class="fas fa-box-open mr-1"></i>
                                    সক্রিয় পণ্য
                                </p>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white rounded-xl shadow p-6">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500">মোট রিভিউ</p>
                                    <p class="text-3xl font-bold mt-2" id="total-reviews">0</p>
                                </div>
                                <div class="text-yellow-600 bg-yellow-50 p-3 rounded-lg">
                                    <i class="fas fa-star text-2xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 pt-4 border-t border-gray-100">
                                <p class="text-red-600 text-sm">
                                    <i class="fas fa-hourglass-half mr-1"></i>
                                    <span id="pending-reviews">0</span> পেন্ডিং
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Orders -->
                    <div class="bg-white rounded-xl shadow mb-8">
                        <div class="p-6 border-b border-gray-100">
                            <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                <i class="fas fa-clock mr-3 text-yellow-500"></i>
                                সাম্প্রতিক অর্ডারসমূহ
                            </h2>
                        </div>
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table class="w-full min-w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">অর্ডার আইডি</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">গ্রাহকের নাম</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">পণ্য</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">মোট</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">স্ট্যাটাস</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">তারিখ</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recent-orders-table">
                                        <tr>
                                            <td colspan="6" class="p-8 text-center text-gray-500">
                                                <div class="flex justify-center items-center space-x-2">
                                                    <i class="fas fa-spinner fa-spin text-xl"></i>
                                                    <span>ডেটা লোড হচ্ছে...</span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Products Management Page -->
                <div id="products-page" class="page-content hidden">
                    <div class="bg-white rounded-xl shadow mb-8">
                        <div class="p-6 border-b border-gray-100">
                            <div class="flex justify-between items-center">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-tshirt mr-3 text-blue-500"></i>
                                    পণ্য ব্যবস্থাপনা
                                </h2>
                                <button id="add-product-btn" class="bg-red-700 hover:bg-red-800 text-white font-bold py-3 px-5 rounded-lg flex items-center transition duration-300">
                                    <i class="fas fa-plus mr-2"></i>নতুন পণ্য
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table class="w-full min-w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">পণ্যের নাম</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">দাম</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">ছাড়</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">সাইজ</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">স্ট্যাটাস</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">ক্রিয়া</th>
                                        </tr>
                                    </thead>
                                    <tbody id="products-table">
                                        <tr>
                                            <td colspan="6" class="p-8 text-center text-gray-500">
                                                <div class="flex justify-center items-center space-x-2">
                                                    <i class="fas fa-spinner fa-spin text-xl"></i>
                                                    <span>ডেটা লোড হচ্ছে...</span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Orders Management Page -->
                <div id="orders-page" class="page-content hidden">
                    <div class="bg-white rounded-xl shadow mb-8">
                        <div class="p-6 border-b border-gray-100">
                            <div class="flex justify-between items-center">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-shopping-cart mr-3 text-green-500"></i>
                                    অর্ডার ব্যবস্থাপনা
                                </h2>
                                <div class="flex space-x-3">
                                    <select id="order-filter" class="border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                        <option value="">সব অর্ডার</option>
                                        <option value="pending">পেন্ডিং</option>
                                        <option value="confirmed">কনফার্মড</option>
                                        <option value="processing">প্রসেসিং</option>
                                        <option value="shipped">শিপড</option>
                                        <option value="delivered">ডেলিভার্ড</option>
                                        <option value="cancelled">ক্যান্সেলড</option>
                                    </select>
                                    <button onclick="loadOrders()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 rounded-lg border border-gray-300">
                                        <i class="fas fa-sync"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table class="w-full min-w-full">
                                    <thead>
                                        <tr class="bg-gray-50">
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">অর্ডার আইডি</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">গ্রাহক</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">পণ্য</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">পরিমাণ</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">মোট</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">স্ট্যাটাস</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">তারিখ</th>
                                            <th class="p-3 text-left text-sm font-medium text-gray-700">ক্রিয়া</th>
                                        </tr>
                                    </thead>
                                    <tbody id="orders-table">
                                        <tr>
                                            <td colspan="8" class="p-8 text-center text-gray-500">
                                                <div class="flex justify-center items-center space-x-2">
                                                    <i class="fas fa-spinner fa-spin text-xl"></i>
                                                    <span>ডেটা লোড হচ্ছে...</span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Reviews Management Page -->
                <div id="reviews-page" class="page-content hidden">
                    <div class="bg-white rounded-xl shadow mb-8">
                        <div class="p-6 border-b border-gray-100">
                            <div class="flex justify-between items-center">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-star mr-3 text-yellow-500"></i>
                                    রিভিউ ব্যবস্থাপনা
                                </h2>
                                <div class="flex space-x-3">
                                    <select id="review-filter" class="border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                        <option value="">সব রিভিউ</option>
                                        <option value="approved">এপ্রুভড</option>
                                        <option value="pending">পেন্ডিং</option>
                                    </select>
                                    <button onclick="loadReviews()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 rounded-lg border border-gray-300">
                                        <i class="fas fa-sync"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div id="reviews-list">
                                <div class="text-center p-8 text-gray-500">
                                    <div class="flex justify-center items-center space-x-2">
                                        <i class="fas fa-spinner fa-spin text-xl"></i>
                                        <span>ডেটা লোড হচ্ছে...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sliders Management Page -->
                <div id="sliders-page" class="page-content hidden">
                    <div class="bg-white rounded-xl shadow mb-8">
                        <div class="p-6 border-b border-gray-100">
                            <div class="flex justify-between items-center">
                                <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-images mr-3 text-purple-500"></i>
                                    স্লাইডার ব্যবস্থাপনা
                                </h2>
                                <button onclick="loadSliders()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 rounded-lg border border-gray-300">
                                    <i class="fas fa-sync"></i>
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div id="sliders-container" class="space-y-6">
                                <div class="text-center p-8 text-gray-500">
                                    <div class="flex justify-center items-center space-x-2">
                                        <i class="fas fa-spinner fa-spin text-xl"></i>
                                        <span>ডেটা লোড হচ্ছে...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Page -->
                <div id="settings-page" class="page-content hidden">
                    <div class="bg-white rounded-xl shadow mb-8">
                        <div class="p-6 border-b border-gray-100">
                            <h2 class="text-xl font-bold text-gray-800 flex items-center">
                                <i class="fas fa-cog mr-3 text-gray-500"></i>
                                ওয়েবসাইট সেটিংস
                            </h2>
                        </div>
                        <div class="p-6">
                            <form id="settings-form" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-gray-700 mb-2">
                                            <i class="fas fa-whatsapp mr-2 text-green-500"></i>
                                            ওয়াটসঅ্যাপ নাম্বার
                                        </label>
                                        <input type="text" id="whatsapp-number" 
                                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                               placeholder="019XXXXXXXX">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 mb-2">
                                            <i class="fas fa-phone-alt mr-2 text-blue-500"></i>
                                            ফোন নাম্বার
                                        </label>
                                        <input type="text" id="phone-number" 
                                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                               placeholder="019XXXXXXXX">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-700 mb-2">
                                        <i class="fas fa-file-alt mr-2 text-gray-500"></i>
                                        ফুটার টেক্সট
                                    </label>
                                    <textarea id="footer-text" rows="3"
                                              class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                              placeholder="প্রিমিয়াম পাঞ্জাবির নির্ভরযোগ্য ঠিকানা"></textarea>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-gray-700 mb-2">
                                            <i class="fas fa-truck mr-2 text-green-500"></i>
                                            ঢাকার ভিতরে ডেলিভারি চার্জ
                                        </label>
                                        <input type="number" id="delivery-inside" 
                                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                               placeholder="60">
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 mb-2">
                                            <i class="fas fa-truck-moving mr-2 text-red-500"></i>
                                            ঢাকার বাইরে ডেলিভারি চার্জ
                                        </label>
                                        <input type="number" id="delivery-outside" 
                                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                               placeholder="160">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-gray-700 mb-2">
                                        <i class="fas fa-clock mr-2 text-yellow-500"></i>
                                        সার্ভিস সময়
                                    </label>
                                    <input type="text" id="service-hours" 
                                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                           placeholder="সকাল ৯টা - রাত ১০টা">
                                </div>
                                
                                <div class="pt-4 border-t border-gray-200">
                                    <button type="submit" class="bg-red-700 hover:bg-red-800 text-white font-bold py-3 px-6 rounded-lg flex items-center">
                                        <i class="fas fa-save mr-2"></i>সেটিংস সেভ করুন
                                    </button>
                                    <p class="text-gray-500 text-sm mt-3">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        সেটিংস পরিবর্তন করলে তা ফ্রন্টএন্ডেও আপডেট হবে
                                    </p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-bold" id="product-modal-title">নতুন পণ্য যোগ করুন</h3>
            </div>
            <form id="product-form" class="p-6 space-y-6">
                <input type="hidden" id="product-id">
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 mb-2">পণ্যের নাম *</label>
                        <input type="text" id="product-name" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">বর্ণনা *</label>
                        <textarea id="product-description" required rows="3"
                                  class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"></textarea>
                    </div>
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">রংসমূহ (প্রতিটি রং এর জন্য নাম, কোড এবং ইমেজ URL)</label>
                    <div id="colors-container" class="space-y-4">
                        <!-- Colors will be added here -->
                    </div>
                    <button type="button" id="add-color-btn" class="mt-3 text-blue-600 hover:text-blue-800 flex items-center">
                        <i class="fas fa-plus-circle mr-2"></i>নতুন রং যোগ করুন
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-gray-700 mb-2">সাইজ *</label>
                        <input type="text" id="product-size" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                               placeholder="S, M, L, XL, XXL">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">নিয়মিত দাম *</label>
                        <input type="number" id="regular-price" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                               min="0">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">অফার দাম *</label>
                        <input type="number" id="offer-price" required 
                               class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                               min="0">
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 mb-2">ছাড়ের শতাংশ</label>
                        <input type="number" id="offer-percentage" 
                               class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50"
                               readonly>
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-2">স্ট্যাটাস</label>
                        <select id="product-status" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                            <option value="true">সক্রিয়</option>
                            <option value="false">নিষ্ক্রিয়</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                    <button type="button" id="cancel-product-btn" 
                            class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-300">
                        বাতিল করুন
                    </button>
                    <button type="submit" id="save-product-btn"
                            class="bg-red-700 hover:bg-red-800 text-white font-bold px-6 py-3 rounded-lg transition duration-300">
                        <i class="fas fa-save mr-2"></i>সেভ করুন
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Order Details Modal -->
    <div id="order-modal" class="modal">
        <div class="modal-content max-w-2xl">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-bold">অর্ডার বিবরণ</h3>
            </div>
            <div class="p-6 space-y-6">
                <div id="order-details">
                    <!-- Order details will be loaded here -->
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">স্ট্যাটাস পরিবর্তন করুন</label>
                    <select id="order-status-select" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                        <option value="pending">পেন্ডিং</option>
                        <option value="confirmed">কনফার্মড</option>
                        <option value="processing">প্রসেসিং</option>
                        <option value="shipped">শিপড</option>
                        <option value="delivered">ডেলিভার্ড</option>
                        <option value="cancelled">ক্যান্সেলড</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-gray-700 mb-2">নোটস</label>
                    <textarea id="order-notes" rows="3"
                              class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"></textarea>
                </div>
                
                <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                    <button type="button" id="cancel-order-btn" 
                            class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition duration-300">
                        বন্ধ করুন
                    </button>
                    <button type="button" id="update-order-btn" 
                            class="bg-red-700 hover:bg-red-800 text-white font-bold px-6 py-3 rounded-lg transition duration-300">
                        <i class="fas fa-sync mr-2"></i>স্ট্যাটাস আপডেট
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Configuration
        const API_BASE_URL = 'https://royal-trustbd.onrender.com'; // Change this to your Render backend URL
        let currentUser = null;
        let selectedOrderId = null;
        
        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const adminPanel = document.getElementById('admin-panel');
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error');
        const loggedInUser = document.getElementById('logged-in-user');
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            const savedUser = localStorage.getItem('admin_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showAdminPanel();
                loadDashboard();
            }
            
            // Setup event listeners
            setupEventListeners();
            
            // Update current time and date
            updateDateTime();
            setInterval(updateDateTime, 1000);
        });
        
        // Setup event listeners
        function setupEventListeners() {
            // Login form
            loginForm.addEventListener('submit', handleLogin);
            
            // Mobile menu
            document.getElementById('mobile-menu-btn').addEventListener('click', toggleMobileMenu);
            document.getElementById('overlay').addEventListener('click', toggleMobileMenu);
            
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.id !== 'logout-btn') {
                    item.addEventListener('click', handleNavigation);
                }
            });
            
            // Logout
            document.getElementById('logout-btn').addEventListener('click', handleLogout);
            
            // Add product button
            document.getElementById('add-product-btn').addEventListener('click', showAddProductModal);
            
            // Product modal
            document.getElementById('cancel-product-btn').addEventListener('click', hideProductModal);
            document.getElementById('product-form').addEventListener('submit', handleProductSubmit);
            document.getElementById('add-color-btn').addEventListener('click', addColorField);
            
            // Order filter
            document.getElementById('order-filter').addEventListener('change', loadOrders);
            
            // Review filter
            document.getElementById('review-filter').addEventListener('change', loadReviews);
            
            // Settings form
            document.getElementById('settings-form').addEventListener('submit', handleSettingsSubmit);
            
            // Price calculation
            document.getElementById('regular-price').addEventListener('input', calculateDiscount);
            document.getElementById('offer-price').addEventListener('input', calculateDiscount);
            
            // Order modal buttons
            document.getElementById('cancel-order-btn').addEventListener('click', hideOrderModal);
            document.getElementById('update-order-btn').addEventListener('click', updateOrderStatus);
            
            // Close modals on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    hideProductModal();
                    hideOrderModal();
                }
            });
        }
        
        // Update current time and date
        function updateDateTime() {
            const now = new Date();
            
            // Date in Bengali format
            const dateOptions = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric'
            };
            document.getElementById('current-date').textContent = 
                now.toLocaleDateString('bn-BD', dateOptions);
            
            // Time
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: true
            };
            document.getElementById('current-time').textContent = 
                now.toLocaleTimeString('bn-BD', timeOptions);
        }
        
        // Toggle mobile menu
        function toggleMobileMenu() {
            document.querySelector('.sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }
        
        // Handle login
        async function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Show loading state
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>লগইন হচ্ছে...';
            submitBtn.disabled = true;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    currentUser = { username: data.username };
                    localStorage.setItem('admin_user', JSON.stringify(currentUser));
                    showAdminPanel();
                    loadDashboard();
                    loginError.classList.add('hidden');
                } else {
                    throw new Error('Login failed');
                }
            } catch (error) {
                loginError.classList.remove('hidden');
                console.error('Login error:', error);
            } finally {
                // Restore button state
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }
        
        // Handle logout
        function handleLogout() {
            if (confirm('আপনি কি নিশ্চিত যে লগআউট করতে চান?')) {
                localStorage.removeItem('admin_user');
                currentUser = null;
                adminPanel.classList.add('hidden');
                loginPage.classList.remove('hidden');
                loginForm.reset();
            }
        }
        
        // Show admin panel
        function showAdminPanel() {
            loginPage.classList.add('hidden');
            adminPanel.classList.remove('hidden');
            loggedInUser.textContent = currentUser.username;
        }
        
        // Handle navigation
        function handleNavigation(e) {
            e.preventDefault();
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            this.classList.add('active');
            
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            const target = this.getAttribute('href').substring(1);
            document.getElementById(`${target}-page`).classList.remove('hidden');
            document.getElementById('page-title').textContent = this.textContent.trim();
            
            // Load page data
            switch(target) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'products':
                    loadProducts();
                    break;
                case 'orders':
                    loadOrders();
                    break;
                case 'reviews':
                    loadReviews();
                    break;
                case 'sliders':
                    loadSliders();
                    break;
                case 'settings':
                    loadSettings();
                    break;
            }
            
            // Close mobile menu on mobile
            if (window.innerWidth < 768) {
                toggleMobileMenu();
            }
        }
        
        // Load dashboard data
        async function loadDashboard() {
            try {
                // Show loading state
                document.getElementById('recent-orders-table').innerHTML = `
                    <tr>
                        <td colspan="6" class="p-8 text-center text-gray-500">
                            <div class="flex justify-center items-center space-x-2">
                                <i class="fas fa-spinner fa-spin text-xl"></i>
                                <span>ডেটা লোড হচ্ছে...</span>
                            </div>
                        </td>
                    </tr>
                `;
                
                const response = await fetch(`${API_BASE_URL}/api/admin/dashboard/stats`);
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Update statistics
                    document.getElementById('total-orders').textContent = data.totalOrders;
                    document.getElementById('pending-orders').textContent = data.pendingOrders;
                    document.getElementById('total-revenue').textContent = data.totalRevenue.toLocaleString('bn-BD');
                    document.getElementById('delivered-orders').textContent = data.deliveredOrders;
                    document.getElementById('total-products').textContent = data.totalProducts;
                    document.getElementById('total-reviews').textContent = data.totalReviews;
                    document.getElementById('pending-reviews').textContent = data.pendingReviews;
                    
                    // Update recent orders table
                    const ordersTable = document.getElementById('recent-orders-table');
                    if (data.recentOrders && data.recentOrders.length > 0) {
                        ordersTable.innerHTML = data.recentOrders.map(order => `
                            <tr class="border-b border-gray-100 hover:bg-gray-50">
                                <td class="p-3 font-mono text-sm">${order.orderId}</td>
                                <td class="p-3">${order.customerName}</td>
                                <td class="p-3 truncate max-w-xs">${order.productName}</td>
                                <td class="p-3">${order.totalPrice} টাকা</td>
                                <td class="p-3">
                                    <span class="order-status status-${order.status}">
                                        ${getStatusText(order.status)}
                                    </span>
                                </td>
                                <td class="p-3 text-sm">${formatDate(order.createdAt)}</td>
                            </tr>
                        `).join('');
                    } else {
                        ordersTable.innerHTML = `
                            <tr>
                                <td colspan="6" class="p-8 text-center text-gray-500">
                                    <i class="fas fa-inbox text-2xl mb-4 text-gray-400"></i>
                                    <p>কোনো অর্ডার পাওয়া যায়নি</p>
                                </td>
                            </tr>
                        `;
                    }
                } else {
                    throw new Error('Failed to load dashboard data');
                }
            } catch (error) {
                console.error('Error loading dashboard:', error);
                document.getElementById('recent-orders-table').innerHTML = `
                    <tr>
                        <td colspan="6" class="p-8 text-center text-gray-500">
                            <i class="fas fa-exclamation-triangle text-2xl mb-4 text-red-500"></i>
                            <p>ডেটা লোড করতে সমস্যা হয়েছে</p>
                            <button onclick="loadDashboard()" class="mt-3 text-blue-600 hover:text-blue-800">
                                <i class="fas fa-redo mr-1"></i>পুনরায় চেষ্টা করুন
                            </button>
                        </td>
                    </tr>
                `;
            }
        }
        
        // Load products
        async function loadProducts() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/products`);
                
                if (response.ok) {
                    const products = await response.json();
                    const productsTable = document.getElementById('products-table');
                    
                    if (products && products.length > 0) {
                        productsTable.innerHTML = products.map(product => `
                            <tr class="border-b border-gray-100 hover:bg-gray-50">
                                <td class="p-3 font-medium">${product.name}</td>
                                <td class="p-3">
                                    <span class="line-through text-gray-500 text-sm">${product.regularPrice} টাকা</span><br>
                                    <span class="text-red-600 font-bold">${product.offerPrice} টাকা</span>
                                </td>
                                <td class="p-3">${product.offerPercentage}%</td>
                                <td class="p-3">${product.size}</td>
                                <td class="p-3">
                                    <span class="px-3 py-1 rounded-full ${product.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                        ${product.isActive ? 'সক্রিয়' : 'নিষ্ক্রিয়'}
                                    </span>
                                </td>
                                <td class="p-3">
                                    <button onclick="editProduct('${product._id}')" 
                                            class="text-blue-600 hover:text-blue-800 mr-3" title="এডিট">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteProduct('${product._id}')" 
                                            class="text-red-600 hover:text-red-800" title="ডিলিট">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        `).join('');
                    } else {
                        productsTable.innerHTML = `
                            <tr>
                                <td colspan="6" class="p-8 text-center text-gray-500">
                                    <i class="fas fa-tshirt text-2xl mb-4 text-gray-400"></i>
                                    <p>কোনো পণ্য পাওয়া যায়নি</p>
                                    <button onclick="showAddProductModal()" class="mt-3 text-red-600 hover:text-red-800">
                                        <i class="fas fa-plus mr-1"></i>প্রথম পণ্য যোগ করুন
                                    </button>
                                </td>
                            </tr>
                        `;
                    }
                } else {
                    throw new Error('Failed to load products');
                }
            } catch (error) {
                console.error('Error loading products:', error);
                document.getElementById('products-table').innerHTML = `
                    <tr>
                        <td colspan="6" class="p-8 text-center text-gray-500">
                            <i class="fas fa-exclamation-triangle text-2xl mb-4 text-red-500"></i>
                            <p>পণ্য লোড করতে সমস্যা হয়েছে</p>
                        </td>
                    </tr>
                `;
            }
        }
        
        // Load orders
        async function loadOrders() {
            const status = document.getElementById('order-filter').value;
            let url = `${API_BASE_URL}/api/admin/orders`;
            if (status) {
                url += `?status=${status}`;
            }
            
            try {
                const response = await fetch(url);
                
                if (response.ok) {
                    const data = await response.json();
                    const ordersTable = document.getElementById('orders-table');
                    
                    if (data.orders && data.orders.length > 0) {
                        ordersTable.innerHTML = data.orders.map(order => `
                            <tr class="border-b border-gray-100 hover:bg-gray-50">
                                <td class="p-3 font-mono text-sm">${order.orderId}</td>
                                <td class="p-3">
                                    <div class="font-medium">${order.customerName}</div>
                                    <div class="text-sm text-gray-500">${order.phone}</div>
                                </td>
                                <td class="p-3">${order.productName}</td>
                                <td class="p-3">${order.quantity} পিস</td>
                                <td class="p-3">${order.totalPrice} টাকা</td>
                                <td class="p-3">
                                    <span class="order-status status-${order.status}">
                                        ${getStatusText(order.status)}
                                    </span>
                                </td>
                                <td class="p-3 text-sm">${formatDate(order.createdAt)}</td>
                                <td class="p-3">
                                    <button onclick="viewOrder('${order._id}')" 
                                            class="text-blue-600 hover:text-blue-800" title="বিস্তারিত দেখুন">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        `).join('');
                    } else {
                        ordersTable.innerHTML = `
                            <tr>
                                <td colspan="8" class="p-8 text-center text-gray-500">
                                    <i class="fas fa-inbox text-2xl mb-4 text-gray-400"></i>
                                    <p>কোনো অর্ডার পাওয়া যায়নি</p>
                                </td>
                            </tr>
                        `;
                    }
                } else {
                    throw new Error('Failed to load orders');
                }
            } catch (error) {
                console.error('Error loading orders:', error);
                document.getElementById('orders-table').innerHTML = `
                    <tr>
                        <td colspan="8" class="p-8 text-center text-gray-500">
                            <i class="fas fa-exclamation-triangle text-2xl mb-4 text-red-500"></i>
                            <p>অর্ডার লোড করতে সমস্যা হয়েছে</p>
                        </td>
                    </tr>
                `;
            }
        }
        
        // Load reviews
        async function loadReviews() {
            const filter = document.getElementById('review-filter').value;
            let url = `${API_BASE_URL}/api/admin/reviews`;
            if (filter) {
                url += `?approved=${filter === 'approved'}`;
            }
            
            try {
                const response = await fetch(url);
                
                if (response.ok) {
                    const reviews = await response.json();
                    const reviewsList = document.getElementById('reviews-list');
                    
                    if (reviews && reviews.length > 0) {
                        reviewsList.innerHTML = reviews.map(review => `
                            <div class="border border-gray-200 rounded-lg p-4 mb-4 hover:bg-gray-50 transition duration-200">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <h4 class="font-bold text-lg">${review.name}</h4>
                                        <p class="text-gray-600 text-sm">
                                            <i class="fas fa-map-marker-alt mr-1"></i>${review.location}
                                            • <i class="far fa-clock mr-1"></i>${formatDate(review.createdAt)}
                                        </p>
                                    </div>
                                    <div class="text-yellow-500">
                                        ${getStarRatingHTML(review.rating)}
                                    </div>
                                </div>
                                <p class="text-gray-700 mb-4 bg-gray-50 p-3 rounded">${review.text}</p>
                                <div class="flex justify-between items-center">
                                    <span class="px-3 py-1 rounded-full ${review.isApproved ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                                        <i class="fas ${review.isApproved ? 'fa-check-circle' : 'fa-clock'} mr-1"></i>
                                        ${review.isApproved ? 'এপ্রুভড' : 'পেন্ডিং'}
                                    </span>
                                    <div>
                                        ${!review.isApproved ? `
                                            <button onclick="approveReview('${review._id}')" 
                                                    class="text-green-600 hover:text-green-800 mr-4 px-3 py-1 rounded hover:bg-green-50 transition duration-200">
                                                <i class="fas fa-check mr-1"></i> এপ্রুভ করুন
                                            </button>
                                        ` : ''}
                                        <button onclick="deleteReview('${review._id}')" 
                                                class="text-red-600 hover:text-red-800 px-3 py-1 rounded hover:bg-red-50 transition duration-200">
                                            <i class="fas fa-trash mr-1"></i> ডিলিট করুন
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        reviewsList.innerHTML = `
                            <div class="text-center p-8 text-gray-500">
                                <i class="fas fa-star text-2xl mb-4 text-gray-400"></i>
                                <p>কোনো রিভিউ পাওয়া যায়নি</p>
                            </div>
                        `;
                    }
                } else {
                    throw new Error('Failed to load reviews');
                }
            } catch (error) {
                console.error('Error loading reviews:', error);
                document.getElementById('reviews-list').innerHTML = `
                    <div class="text-center p-8 text-gray-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4 text-red-500"></i>
                        <p>রিভিউ লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Load sliders
        async function loadSliders() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/sliders`);
                
                if (response.ok) {
                    const sliders = await response.json();
                    const container = document.getElementById('sliders-container');
                    
                    if (sliders && sliders.length > 0) {
                        container.innerHTML = sliders.map(slider => `
                            <div class="border border-gray-200 rounded-lg p-6 hover:shadow-md transition duration-200">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="text-lg font-bold flex items-center">
                                        <i class="fas fa-image mr-3 text-purple-500"></i>
                                        স্লাইড #${slider.slideNumber}
                                    </h3>
                                    <label class="inline-flex items-center cursor-pointer">
                                        <input type="checkbox" ${slider.isActive ? 'checked' : ''} 
                                               onchange="toggleSlider('${slider._id}', this.checked)"
                                               class="sr-only peer">
                                        <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                        <span class="ml-3 text-sm font-medium">সক্রিয়</span>
                                    </label>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <img src="${slider.imageUrl}" alt="Slider ${slider.slideNumber}" 
                                             class="w-full h-48 object-cover rounded-lg shadow">
                                    </div>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-gray-700 mb-1">শিরোনাম</label>
                                            <input type="text" value="${slider.title}" 
                                                   onchange="updateSliderField('${slider._id}', 'title', this.value)"
                                                   class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                        </div>
                                        <div>
                                            <label class="block text-gray-700 mb-1">সাবটাইটেল</label>
                                            <input type="text" value="${slider.subtitle}" 
                                                   onchange="updateSliderField('${slider._id}', 'subtitle', this.value)"
                                                   class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                        </div>
                                        <div>
                                            <label class="block text-gray-700 mb-1">বর্ণনা</label>
                                            <textarea onchange="updateSliderField('${slider._id}', 'description', this.value)"
                                                      class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                                      rows="2">${slider.description}</textarea>
                                        </div>
                                        <div class="grid grid-cols-2 gap-3">
                                            <div>
                                                <label class="block text-gray-700 mb-1">দাম</label>
                                                <input type="number" value="${slider.price}" 
                                                       onchange="updateSliderField('${slider._id}', 'price', this.value)"
                                                       class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 mb-1">আসল দাম</label>
                                                <input type="number" value="${slider.originalPrice}" 
                                                       onchange="updateSliderField('${slider._id}', 'originalPrice', this.value)"
                                                       class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        container.innerHTML = `
                            <div class="text-center p-8 text-gray-500">
                                <i class="fas fa-images text-2xl mb-4 text-gray-400"></i>
                                <p>কোনো স্লাইডার পাওয়া যায়নি</p>
                            </div>
                        `;
                    }
                } else {
                    throw new Error('Failed to load sliders');
                }
            } catch (error) {
                console.error('Error loading sliders:', error);
                document.getElementById('sliders-container').innerHTML = `
                    <div class="text-center p-8 text-gray-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-4 text-red-500"></i>
                        <p>স্লাইডার লোড করতে সমস্যা হয়েছে</p>
                    </div>
                `;
            }
        }
        
        // Load settings
        async function loadSettings() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/settings`);
                
                if (response.ok) {
                    const settings = await response.json();
                    
                    document.getElementById('whatsapp-number').value = settings.whatsappNumber || '01911465879';
                    document.getElementById('phone-number').value = settings.phoneNumber || '01911465879';
                    document.getElementById('footer-text').value = settings.footerText || 'প্রিমিয়াম পাঞ্জাবির নির্ভরযোগ্য ঠিকানা';
                    document.getElementById('delivery-inside').value = settings.deliveryChargeInsideDhaka || 60;
                    document.getElementById('delivery-outside').value = settings.deliveryChargeOutsideDhaka || 160;
                    document.getElementById('service-hours').value = settings.serviceHours || 'সকাল ৯টা - রাত ১০টা';
                } else {
                    throw new Error('Failed to load settings');
                }
            } catch (error) {
                console.error('Error loading settings:', error);
                alert('সেটিংস লোড করতে সমস্যা হয়েছে। পরে আবার চেষ্টা করুন।');
            }
        }
        
        // Product Modal Functions
        function showAddProductModal() {
            document.getElementById('product-modal-title').textContent = 'নতুন পণ্য যোগ করুন';
            document.getElementById('product-id').value = '';
            document.getElementById('product-form').reset();
            document.getElementById('colors-container').innerHTML = '';
            addColorField(); // Add one initial color field
            calculateDiscount(); // Calculate initial discount
            document.getElementById('product-modal').classList.add('active');
        }
        
        function hideProductModal() {
            document.getElementById('product-modal').classList.remove('active');
        }
        
        function addColorField() {
            const container = document.getElementById('colors-container');
            const index = container.children.length;
            
            const colorField = document.createElement('div');
            colorField.className = 'border border-gray-200 rounded-lg p-4';
            colorField.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <span class="font-medium flex items-center">
                        <i class="fas fa-palette mr-2"></i>
                        রং #${index + 1}
                    </span>
                    ${index > 0 ? `
                    <button type="button" onclick="this.parentElement.parentElement.remove()" 
                            class="text-red-600 hover:text-red-800 p-1">
                        <i class="fas fa-times"></i>
                    </button>
                    ` : ''}
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div>
                        <label class="block text-gray-700 mb-1">রং এর নাম</label>
                        <input type="text" name="color-name" required 
                               class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent"
                               placeholder="যেমন: লাল ও সোনালী">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-1">রং কোড</label>
                        <input type="text" name="color-code" required 
                               class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent"
                               placeholder="#dc2626">
                    </div>
                    <div>
                        <label class="block text-gray-700 mb-1">ইমেজ URL</label>
                        <input type="url" name="color-image" required 
                               class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-red-500 focus:border-transparent"
                               placeholder="https://example.com/image.jpg">
                    </div>
                </div>
            `;
            
            container.appendChild(colorField);
        }
        
        function calculateDiscount() {
            const regularPrice = parseFloat(document.getElementById('regular-price').value) || 0;
            const offerPrice = parseFloat(document.getElementById('offer-price').value) || 0;
            
            if (regularPrice > 0 && offerPrice > 0 && regularPrice >= offerPrice) {
                const discount = ((regularPrice - offerPrice) / regularPrice) * 100;
                document.getElementById('offer-percentage').value = Math.round(discount);
            } else {
                document.getElementById('offer-percentage').value = 0;
            }
        }
        
        async function handleProductSubmit(e) {
            e.preventDefault();
            
            // Disable submit button and show loading
            const submitBtn = document.getElementById('save-product-btn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>সেভ হচ্ছে...';
            submitBtn.disabled = true;
            
            const productId = document.getElementById('product-id').value;
            const colors = [];
            
            // Collect color data
            document.querySelectorAll('#colors-container > div').forEach(container => {
                const name = container.querySelector('[name="color-name"]').value;
                const code = container.querySelector('[name="color-code"]').value;
                const image = container.querySelector('[name="color-image"]').value;
                
                if (name && code && image) {
                    colors.push({ name, code, image });
                }
            });
            
            // Validate colors
            if (colors.length === 0) {
                alert('অন্তত একটি রং যোগ করুন।');
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                return;
            }
            
            const productData = {
                name: document.getElementById('product-name').value,
                description: document.getElementById('product-description').value,
                colors: colors,
                size: document.getElementById('product-size').value,
                regularPrice: parseFloat(document.getElementById('regular-price').value),
                offerPrice: parseFloat(document.getElementById('offer-price').value),
                offerPercentage: parseFloat(document.getElementById('offer-percentage').value),
                isActive: document.getElementById('product-status').value === 'true'
            };
            
            try {
                const url = productId ? 
                    `${API_BASE_URL}/api/admin/products/${productId}` : 
                    `${API_BASE_URL}/api/admin/products`;
                
                const method = productId ? 'PUT' : 'POST';
                
                const response = await fetch(url, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(productData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    hideProductModal();
                    loadProducts();
                    alert(result.message || 'পণ্য সফলভাবে সেভ হয়েছে!');
                } else {
                    const error = await response.json();
                    throw new Error(error.error || 'Failed to save product');
                }
            } catch (error) {
                console.error('Error saving product:', error);
                alert('পণ্য সেভ করতে সমস্যা হয়েছে: ' + error.message);
            } finally {
                // Restore button state
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }
        
        async function editProduct(productId) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/products`);
                
                if (response.ok) {
                    const products = await response.json();
                    const product = products.find(p => p._id === productId);
                    
                    if (product) {
                        document.getElementById('product-modal-title').textContent = 'পণ্য এডিট করুন';
                        document.getElementById('product-id').value = product._id;
                        document.getElementById('product-name').value = product.name;
                        document.getElementById('product-description').value = product.description;
                        document.getElementById('product-size').value = product.size;
                        document.getElementById('regular-price').value = product.regularPrice;
                        document.getElementById('offer-price').value = product.offerPrice;
                        document.getElementById('offer-percentage').value = product.offerPercentage;
                        document.getElementById('product-status').value = product.isActive.toString();
                        
                        // Load colors
                        document.getElementById('colors-container').innerHTML = '';
                        product.colors.forEach((color, index) => {
                            addColorField();
                            const lastContainer = document.querySelector('#colors-container > div:last-child');
                            lastContainer.querySelector('[name="color-name"]').value = color.name;
                            lastContainer.querySelector('[name="color-code"]').value = color.code;
                            lastContainer.querySelector('[name="color-image"]').value = color.image;
                        });
                        
                        document.getElementById('product-modal').classList.add('active');
                    }
                }
            } catch (error) {
                console.error('Error loading product:', error);
                alert('পণ্য লোড করতে সমস্যা হয়েছে!');
            }
        }
        
        async function deleteProduct(productId) {
            if (!confirm('আপনি কি নিশ্চিত যে এই পণ্য ডিলিট করতে চান?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/products/${productId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    loadProducts();
                    alert(result.message || 'পণ্য সফলভাবে ডিলিট হয়েছে!');
                } else {
                    throw new Error('Failed to delete product');
                }
            } catch (error) {
                console.error('Error deleting product:', error);
                alert('পণ্য ডিলিট করতে সমস্যা হয়েছে!');
            }
        }
        
        // Order Modal Functions
        async function viewOrder(orderId) {
            selectedOrderId = orderId;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/orders`);
                
                if (response.ok) {
                    const data = await response.json();
                    const order = data.orders.find(o => o._id === orderId);
                    
                    if (order) {
                        document.getElementById('order-details').innerHTML = `
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-gray-700 mb-3 flex items-center">
                                        <i class="fas fa-user mr-2 text-blue-500"></i>
                                        গ্রাহক তথ্য
                                    </h4>
                                    <p class="mb-2"><strong>নাম:</strong> ${order.customerName}</p>
                                    <p class="mb-2"><strong>ফোন:</strong> ${order.phone}</p>
                                    <p><strong>ঠিকানা:</strong> ${order.address}</p>
                                </div>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-gray-700 mb-3 flex items-center">
                                        <i class="fas fa-shopping-cart mr-2 text-green-500"></i>
                                        অর্ডার তথ্য
                                    </h4>
                                    <p class="mb-2"><strong>অর্ডার আইডি:</strong> ${order.orderId}</p>
                                    <p class="mb-2"><strong>পণ্য:</strong> ${order.productName}</p>
                                    <p class="mb-2"><strong>রং:</strong> ${order.color}</p>
                                    <p class="mb-2"><strong>সাইজ:</strong> ${order.size}</p>
                                    <p class="mb-2"><strong>পরিমাণ:</strong> ${order.quantity} পিস</p>
                                    <p><strong>মোট দাম:</strong> ${order.totalPrice} টাকা</p>
                                </div>
                            </div>
                        `;
                        
                        document.getElementById('order-status-select').value = order.status;
                        document.getElementById('order-notes').value = order.notes || '';
                        
                        document.getElementById('order-modal').classList.add('active');
                    }
                }
            } catch (error) {
                console.error('Error loading order:', error);
                alert('অর্ডার লোড করতে সমস্যা হয়েছে!');
            }
        }
        
        async function updateOrderStatus() {
            const status = document.getElementById('order-status-select').value;
            const notes = document.getElementById('order-notes').value;
            
            // Disable button and show loading
            const updateBtn = document.getElementById('update-order-btn');
            const originalText = updateBtn.innerHTML;
            updateBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>আপডেট হচ্ছে...';
            updateBtn.disabled = true;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/orders/${selectedOrderId}/status`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ status, notes })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    hideOrderModal();
                    loadOrders();
                    alert(result.message || 'অর্ডার স্ট্যাটাস সফলভাবে আপডেট হয়েছে!');
                } else {
                    throw new Error('Failed to update order');
                }
            } catch (error) {
                console.error('Error updating order:', error);
                alert('স্ট্যাটাস আপডেট করতে সমস্যা হয়েছে!');
            } finally {
                // Restore button state
                updateBtn.innerHTML = originalText;
                updateBtn.disabled = false;
            }
        }
        
        function hideOrderModal() {
            document.getElementById('order-modal').classList.remove('active');
            selectedOrderId = null;
        }
        
        // Review Functions
        async function approveReview(reviewId) {
            if (!confirm('আপনি কি এই রিভিউ এপ্রুভ করতে চান?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/reviews/${reviewId}/approve`, {
                    method: 'PUT'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    loadReviews();
                    alert(result.message || 'রিভিউ সফলভাবে এপ্রুভ হয়েছে!');
                } else {
                    throw new Error('Failed to approve review');
                }
            } catch (error) {
                console.error('Error approving review:', error);
                alert('রিভিউ এপ্রুভ করতে সমস্যা হয়েছে!');
            }
        }
        
        async function deleteReview(reviewId) {
            if (!confirm('আপনি কি নিশ্চিত যে এই রিভিউ ডিলিট করতে চান?')) return;
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/reviews/${reviewId}`, {
                    method: 'DELETE'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    loadReviews();
                    alert(result.message || 'রিভিউ সফলভাবে ডিলিট হয়েছে!');
                } else {
                    throw new Error('Failed to delete review');
                }
            } catch (error) {
                console.error('Error deleting review:', error);
                alert('রিভিউ ডিলিট করতে সমস্যা হয়েছে!');
            }
        }
        
        // Slider Functions
        async function updateSliderField(sliderId, field, value) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/sliders/${sliderId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ [field]: value })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to update slider');
                }
            } catch (error) {
                console.error('Error updating slider:', error);
                alert('স্লাইডার আপডেট করতে সমস্যা হয়েছে!');
            }
        }
        
        async function toggleSlider(sliderId, isActive) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/sliders/${sliderId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ isActive })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to toggle slider');
                }
            } catch (error) {
                console.error('Error toggling slider:', error);
                alert('স্লাইডার স্ট্যাটাস পরিবর্তন করতে সমস্যা হয়েছে!');
            }
        }
        
        // Settings Functions
        async function handleSettingsSubmit(e) {
            e.preventDefault();
            
            // Disable submit button and show loading
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>সেভ হচ্ছে...';
            submitBtn.disabled = true;
            
            const settingsData = {
                whatsappNumber: document.getElementById('whatsapp-number').value,
                phoneNumber: document.getElementById('phone-number').value,
                footerText: document.getElementById('footer-text').value,
                deliveryChargeInsideDhaka: parseFloat(document.getElementById('delivery-inside').value),
                deliveryChargeOutsideDhaka: parseFloat(document.getElementById('delivery-outside').value),
                serviceHours: document.getElementById('service-hours').value
            };
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/settings`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(settingsData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    alert(result.message || 'সেটিংস সফলভাবে সেভ হয়েছে!');
                } else {
                    throw new Error('Failed to save settings');
                }
            } catch (error) {
                console.error('Error saving settings:', error);
                alert('সেটিংস সেভ করতে সমস্যা হয়েছে!');
            } finally {
                // Restore button state
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        }
        
        // Helper Functions
        function getStatusText(status) {
            const statusMap = {
                'pending': 'পেন্ডিং',
                'confirmed': 'কনফার্মড',
                'processing': 'প্রসেসিং',
                'shipped': 'শিপড',
                'delivered': 'ডেলিভার্ড',
                'cancelled': 'ক্যান্সেলড'
            };
            return statusMap[status] || status;
        }
        
        function getStarRatingHTML(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += i <= rating ? 
                    '<i class="fas fa-star"></i>' : 
                    '<i class="far fa-star"></i>';
            }
            return stars;
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return date.toLocaleDateString('bn-BD', options);
        }
        
        // Expose functions to global scope
        window.editProduct = editProduct;
        window.deleteProduct = deleteProduct;
        window.viewOrder = viewOrder;
        window.approveReview = approveReview;
        window.deleteReview = deleteReview;
        window.updateSliderField = updateSliderField;
        window.toggleSlider = toggleSlider;
        window.updateOrderStatus = updateOrderStatus;
        window.loadDashboard = loadDashboard;
        window.loadProducts = loadProducts;
        window.loadOrders = loadOrders;
        window.loadReviews = loadReviews;
        window.loadSliders = loadSliders;
        window.loadSettings = loadSettings;
    </script>
</body>
</html>